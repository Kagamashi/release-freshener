<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stable Releases</title>
  <!-- Bootstrap 5 (CSS only) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeo9Z/hh5c+G3GoOT6eNyVw6V9UfXGdZajp+STV8f2Hzhk25"
    crossorigin="anonymous"
  />
</head>
<body class="bg-light">
  <div class="container my-5">
    <h1 class="mb-4 text-center">Latest Stable Releases (Cached)</h1>
    <div id="release-container" class="row g-4">
      <!-- JavaScript will populate releases here -->
    </div>
  </div>

  <script>
    async function loadReleases() {
      const container = document.getElementById("release-container");
      // Show a loading spinner
      container.innerHTML = `<div class="text-center"><div class="spinner-border" role="status"></div></div>`;

      try {
        // Fetch your static JSON from docs/data/releases.json
        const response = await fetch("./data/releases.json");
        if (!response.ok) throw new Error(`HTTP ${response.status} - ${response.statusText}`);

        const releases = await response.json();
        // Build Bootstrap cards
        let html = "";
        releases.forEach((rel) => {
          html += `
            <div class="col-12 col-md-6 col-lg-4">
              <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                  <h5 class="card-title">${rel.owner}/${rel.repo}</h5>
                  <p class="card-subtitle text-muted mb-2">${rel.tag_name}</p>
                  <p class="card-text mb-2">
                    <strong>Name:</strong> ${rel.name}<br />
                    <strong>Published:</strong> ${rel.published_at}
                  </p>
                  <a href="${rel.html_url}" target="_blank" class="btn btn-primary mt-auto">View Release</a>
                </div>
              </div>
            </div>
          `;
        });
        container.innerHTML = html;
      } catch (err) {
        // Display an error alert
        container.innerHTML = `
          <div class="alert alert-danger" role="alert">
            Error loading releases: ${err.message}
          </div>
        `;
      }
    }

    // Initialize
    loadReleases();
  </script>
</body>
</html>
